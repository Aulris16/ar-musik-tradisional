<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Etnik AR - Alat Musik Tradisional Indonesia</title>
    
    <!-- Favicon (opsional) -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŽµ</text></svg>">
    
    <!-- AR Libraries -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- ============================================ -->
    <!-- ONBOARDING SCREEN -->
    <!-- ============================================ -->
    <div id="onboarding-overlay">
        <div class="onboarding-content">
            <div class="app-icon">ðŸŽµ</div>
            <h1>Etnik AR</h1>
            <p class="subtitle">Jelajahi Alat Musik Tradisional Indonesia</p>
            
            <div class="instructions">
                <div class="instruction-item">
                    <span class="step">1</span>
                    <span>Siapkan marker Angklung</span>
                </div>
                <div class="instruction-item">
                    <span class="step">2</span>
                    <span>Arahkan kamera ke marker</span>
                </div>
                <div class="instruction-item">
                    <span class="step">3</span>
                    <span>Nikmati pengalaman AR!</span>
                </div>
            </div>

            <div id="loading-status">
                <div class="loader"></div>
                <span>Memuat pengalaman AR...</span>
            </div>

            <button id="btn-start" disabled>
                <span class="btn-icon">ðŸ“·</span>
                <span>Mulai Pengalaman AR</span>
            </button>
            
            <a href="assets/marker-angklung.png" target="_blank" class="download-marker" download>
                <span class="btn-icon">ðŸ“¥</span>
                <span>Download Marker Angklung</span>
            </a>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- HEADER -->
    <!-- ============================================ -->
    <header>
        <div class="header-content">
            <div class="header-left">
                <span class="header-icon">ðŸŽµ</span>
                <div class="header-text">
                    <h1>Etnik AR</h1>
                    <p id="status-text">Arahkan kamera ke marker</p>
                </div>
            </div>
        </div>
    </header>

    <!-- ============================================ -->
    <!-- AR SCENE -->
    <!-- ============================================ -->
    <a-scene 
        embedded 
        arjs="sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
        vr-mode-ui="enabled: false"
        renderer="logarithmicDepthBuffer: true; antialias: true;"
        loading-screen="enabled: false">

        <!-- ASSETS -->
        <a-assets timeout="30000">
            <a-asset-item id="angklung-model" src="assets/angklung.glb"></a-asset-item>
            <audio id="sound-angklung" src="assets/angklung.mp3" preload="auto"></audio>
        </a-assets>

        <!-- ============================================ -->
        <!-- MARKER ANGKLUNG -->
        <!-- ============================================ -->
        <a-marker type="pattern" url="markers/pattern-angklung.patt" id="marker-angklung">
            <!-- Lighting -->
            <a-light type="ambient" color="#ffffff" intensity="1"></a-light>
            <a-light type="directional" color="#ffffff" intensity="0.6" position="0 2 1"></a-light>
            
            <!-- Model 3D Angklung -->
            <a-entity 
                id="model-angklung"
                gltf-model="#angklung-model"
                scale="0.5 0.5 0.5" 
                rotation="0 0 0" 
                position="0 0 0"
                animation="property: rotation; to: 0 360 0; loop: true; dur: 8000; easing: linear;">
            </a-entity>

            <!-- Text Labels -->
            <a-text value="ANGKLUNG" 
                    position="0 1.2 0" 
                    align="center" 
                    color="#ffffff" 
                    scale="1.2 1.2 1.2"
                    font="mozillavr">
            </a-text>
            <a-text value="Jawa Barat" 
                    position="0 0.95 0" 
                    align="center" 
                    color="#ffd700" 
                    scale="0.8 0.8 0.8">
            </a-text>
        </a-marker>

        <!-- CAMERA -->
        <a-entity camera></a-entity>
    </a-scene>

    <!-- ============================================ -->
    <!-- INFO PANEL (Footer) -->
    <!-- ============================================ -->
    <div id="info-panel" class="info-panel hidden">
        <div class="info-header">
            <div class="info-title">
                <h2>Angklung</h2>
                <span class="info-badge">Jawa Barat</span>
            </div>
            <button id="btn-close" class="btn-close" aria-label="Tutup">Ã—</button>
        </div>
        
        <div class="info-body">
            <p>Angklung adalah alat musik multitonal yang berkembang dari masyarakat Sunda. Terbuat dari bambu dan dimainkan dengan cara digoyangkan. UNESCO mengakui Angklung sebagai Warisan Budaya Dunia pada tahun 2010.</p>
        </div>
        
        <div class="info-actions">
            <button id="btn-audio" class="btn-action btn-audio">
                <span class="action-icon">ðŸ”Š</span>
                <span>Putar Suara</span>
            </button>
            <a href="https://id.wikipedia.org/wiki/Angklung" target="_blank" rel="noopener" class="btn-action btn-wiki">
                <span class="action-icon">ðŸ“–</span>
                <span>Baca Selengkapnya</span>
            </a>
        </div>
    </div>

    <!-- ============================================ -->
    <!-- SCAN HINT (Muncul saat tidak ada marker) -->
    <!-- ============================================ -->
    <div id="scan-hint" class="scan-hint">
        <div class="scan-animation">
            <div class="scan-corners"></div>
        </div>
        <p>Arahkan kamera ke marker Angklung</p>
    </div>

    <script src="script.js"></script>
</body>
</html>