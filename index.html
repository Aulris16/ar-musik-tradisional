<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Etnik AR - Alat Musik Tradisional</title>
    
    <!-- âœ… ERUDA Debug Console untuk HP -->
    <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
    <script>eruda.init();</script>
    
    <!-- âœ… CDN YANG SUDAH TERUJI & STABIL -->
    <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- DEBUG OVERLAY -->
    <div id="debug-overlay">
        <div><strong>ğŸ” DEBUG LOG</strong></div>
        <hr>
        <div id="debug-log"></div>
    </div>

    <!-- ONBOARDING -->
    <div id="onboarding-overlay">
        <div class="onboarding-content">
            <h1>ğŸµ Etnik AR</h1>
            <p>Augmented Reality Alat Musik</p>
            
            <div id="asset-status" class="status-loading">
                â³ Memuat library AR...
            </div>

            <div class="instructions">
                <strong>ğŸ“‹ Cara Pakai:</strong><br>
                1. Klik tombol START/TEST<br>
                2. Arahkan kamera ke marker<br>
                3. Jarak 20-40cm, tahan stabil
            </div>

            <button id="btn-start" disabled>â³ LOADING...</button>
            
            <button id="btn-test-hiro" class="btn-hiro">
                ğŸ§ª TEST MARKER HIRO
            </button>
            
            <div class="marker-links">
                <a href="https://raw.githubusercontent.com/AR-js-org/AR.js/master/data/images/hiro.png" target="_blank" class="link-btn">
                    ğŸ“· Buka Marker HIRO
                </a>
                <a href="assets/marker-angklung.png" target="_blank" class="link-btn" download>
                    ğŸ“¥ Download Marker Angklung
                </a>
            </div>
        </div>
    </div>

    <!-- HEADER -->
    <header>
        <div class="glass-panel">
            <h1>Etnik AR</h1>
            <p id="status-text">Memuat...</p>
        </div>
    </header>

    <!-- AR SCENE -->
    <a-scene 
        embedded 
        arjs="sourceType: webcam; debugUIEnabled: true; detectionMode: mono_and_matrix; matrixCodeType: 3x3;"
        vr-mode-ui="enabled: false"
        renderer="logarithmicDepthBuffer: true; antialias: true;"
        loading-screen="enabled: false">

        <!-- ASSETS -->
        <a-assets timeout="30000">
            <a-asset-item id="angklung-model" src="assets/angklung.glb"></a-asset-item>
            <audio id="sound-angklung" src="assets/angklung.mp3" preload="auto"></audio>
        </a-assets>

        <!-- ============================================ -->
        <!-- MARKER HIRO (UNTUK TESTING) -->
        <!-- ============================================ -->
        <a-marker preset="hiro" id="marker-hiro" raycaster="objects: .clickable" emitevents="true" cursor="fuse: false; rayOrigin: mouse;">
            <!-- Lighting -->
            <a-light type="ambient" color="#ffffff" intensity="1"></a-light>
            <a-light type="directional" color="#ffffff" intensity="0.5" position="0 1 1"></a-light>
            
            <!-- Kotak Biru (Debug) -->
            <a-box position="0 0.5 0" 
                   material="color: #4285f4;" 
                   scale="1 1 1"
                   animation="property: rotation; to: 0 360 0; loop: true; dur: 2000; easing: linear;">
            </a-box>
            
            <!-- Text -->
            <a-text value="HIRO OK!" position="0 1.5 0" align="center" color="#00ff00" scale="1.5 1.5 1.5"></a-text>
        </a-marker>

        <!-- ============================================ -->
        <!-- MARKER ANGKLUNG (CUSTOM) -->
        <!-- ============================================ -->
        <a-marker type="pattern" url="markers/pattern-angklung.patt" id="marker-angklung">
            <!-- Lighting -->
            <a-light type="ambient" color="#ffffff" intensity="1"></a-light>
            <a-light type="directional" color="#ffffff" intensity="0.5" position="0 1 1"></a-light>
            
            <!-- Kotak Merah (Debug) -->
            <a-box position="0 0.5 0" 
                   material="color: #ff0000;" 
                   scale="0.5 0.5 0.5"
                   animation="property: rotation; to: 0 360 0; loop: true; dur: 3000; easing: linear;">
            </a-box>
            
            <!-- Model 3D Angklung -->
            <a-entity 
                id="model-angklung"
                gltf-model="#angklung-model"
                scale="0.5 0.5 0.5" 
                rotation="0 0 0" 
                position="0.7 0 0">
            </a-entity>

            <!-- Text Labels -->
            <a-text value="ANGKLUNG" position="0 1.3 0" align="center" color="#ffffff" scale="1 1 1"></a-text>
            <a-text value="Jawa Barat" position="0 1.1 0" align="center" color="#ffff00" scale="0.7 0.7 0.7"></a-text>
        </a-marker>

        <!-- CAMERA -->
        <a-entity camera></a-entity>
    </a-scene>

    <!-- FOOTER INFO PANEL -->
    <footer>
        <div id="info-panel" class="info-card hidden">
            <div class="card-content">
                <div class="card-header">
                    <h3>Angklung</h3>
                    <span class="badge">Jawa Barat</span>
                </div>
                <p>Alat musik multitonal dari masyarakat Sunda. Terbuat dari bambu.</p>
                <div class="controls">
                    <button id="btn-audio" class="btn-primary">ğŸ”Š Mainkan Suara</button>
                </div>
            </div>
        </div>
    </footer>

    <!-- SCRIPT -->
    <script src="script.js"></script>
</body>
</html>
